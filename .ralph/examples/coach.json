{
  "name": "Coach",
  "description": "A one-on-one video coaching platform with Daily.co integration, student management, lesson planning, analytics, payments, and marketing funnel",
  "stories": [
    {
      "id": "setup-local-dev-environment",
      "title": "Local development environment setup",
      "description": "Clear instructions to get the project running locally with all dependencies",
      "acceptance": [
        "README.md contains complete setup instructions",
        "Clone repository and run `bun install`",
        "Copy `.env.example` to `.env.local` and configure variables",
        "Run `docker compose up -d` to start PostgreSQL",
        "Run `bunx drizzle-kit push` to apply database schema",
        "Run `bun dev` to start development server on localhost:3000",
        "Visit http://localhost:3000 to verify app loads",
        "All environment variables documented in .env.example with descriptions",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "setup-nextjs-project-init",
      "title": "Initialize Coach project with Next.js 16 and core dependencies",
      "description": "Bootstrap the coaching platform with Next.js 16, TypeScript, Tailwind CSS, shadcn/ui, Biome, Docker with PostgreSQL, Drizzle ORM, and Zod. Only use Next.js API routes for data fetching.",
      "acceptance": [
        "Next.js app created via `bunx create-next-app@latest coach --ts --tailwind --biome --app --src-dir --use-bun --no-turbopack --no-import-alias`",
        "Changed into coach directory: `cd coach`",
        "shadcn/ui initialized via `bunx shadcn@latest init -y --base-color=neutral`",
        "Essential shadcn components added: button, card, dialog, input, label, avatar, badge, tabs, separator, dropdown-menu",
        "Project structure established with /src/app/(marketing), /src/app/(dashboard), /src/app/(auth) route groups",
        "Docker Compose file created at docker-compose.yml with PostgreSQL service (postgres:16, port 5432, volume for persistence)",
        "Environment variables configured in .env.local: DATABASE_URL=postgresql://postgres:postgres@localhost:5432/coach",
        ".env.example created with all required environment variable templates",
        "Drizzle ORM and PostgreSQL driver installed via `bun add drizzle-orm postgres zod && bun add -d drizzle-kit`",
        "Drizzle config file at drizzle.config.ts pointing to PostgreSQL",
        "Database connection singleton at /src/lib/db/index.ts using postgres driver",
        "TypeScript strict mode enabled in tsconfig.json",
        "Opened project in Cursor via `cursor .`",
        "`docker compose up -d` starts PostgreSQL successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-users",
      "title": "Create users database schema",
      "description": "Define the users table schema with Drizzle ORM for storing coach and student user accounts.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/users.ts",
        "Users table defined: id (uuid primary key), email (unique), name, role (coach|student), avatarUrl, bio, timezone, createdAt, updatedAt",
        "Zod validation schema for user creation and updates",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for users table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-students",
      "title": "Create students database schema",
      "description": "Define the students table schema linking student users to their coaches with status and notes.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/students.ts",
        "Students table defined: id (uuid primary key), userId (foreign key to users), coachId (foreign key to users), status (active|inactive|pending), notes, createdAt",
        "Proper foreign key relationships with cascade delete",
        "Zod validation schema for student creation and updates",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for students table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-lessons",
      "title": "Create lessons database schema",
      "description": "Define the lessons table schema for scheduled coaching sessions between coaches and students.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/lessons.ts",
        "Lessons table defined: id (uuid primary key), coachId, studentId, title, description, scheduledAt, duration, status (scheduled|completed|cancelled), roomUrl, recordingUrl, createdAt",
        "Foreign key relationships to users table",
        "Zod validation schema for lesson creation and updates",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for lessons table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-lesson-plans",
      "title": "Create lesson plans database schema",
      "description": "Define the lesson plans table schema for reusable coaching templates.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/lesson-plans.ts",
        "LessonPlans table defined: id (uuid primary key), coachId, title, description, objectives (json array), materials (json array), isDraft, createdAt, updatedAt",
        "Foreign key relationship to users table",
        "Zod validation schema for lesson plan creation and updates",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for lesson_plans table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-payments",
      "title": "Create payments database schema",
      "description": "Define the payments table schema for tracking Stripe payment transactions.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/payments.ts",
        "Payments table defined: id (uuid primary key), coachId, studentId, amount (integer cents), currency, status (pending|completed|failed|refunded), stripePaymentId, createdAt",
        "Foreign key relationships to users table",
        "Zod validation schema for payment records",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for payments table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "db-schema-analytics",
      "title": "Create analytics database schema",
      "description": "Define the analytics table schema for tracking platform events and metrics.",
      "acceptance": [
        "Schema file created at /src/lib/db/schema/analytics.ts",
        "Analytics table defined: id (uuid primary key), coachId, eventType, eventData (jsonb), createdAt",
        "Foreign key relationship to users table",
        "Zod validation schema for analytics events",
        "Schema exported from /src/lib/db/schema/index.ts",
        "`bunx drizzle-kit generate` creates migration for analytics table",
        "`bunx drizzle-kit migrate` applies migration successfully",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "auth-better-auth-setup",
      "title": "Configure better-auth with credentials provider",
      "description": "Set up better-auth authentication library with email/password credentials and session management.",
      "acceptance": [
        "better-auth installed via `bun add better-auth`",
        "Auth configuration at /src/lib/auth.ts with credentials provider",
        "Password hashing configured using built-in bcrypt",
        "Session configuration with JWT strategy",
        "Auth API route at /src/app/api/auth/[...all]/route.ts",
        "Session includes user id, email, name, role, and avatarUrl",
        "Auth client helper at /src/lib/auth-client.ts for client-side usage",
        "Environment variables added to .env.example: BETTER_AUTH_SECRET, BETTER_AUTH_URL",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "auth-middleware-route-protection",
      "title": "Implement auth middleware and route protection",
      "description": "Create middleware for protecting dashboard routes and implementing role-based access control.",
      "acceptance": [
        "Middleware at /src/middleware.ts protecting /dashboard routes",
        "Unauthenticated users redirected to /login",
        "Role-based route protection: coaches access /dashboard/coach/*, students access /dashboard/student/*",
        "Wrong role redirected to their correct dashboard",
        "Auth context provider at /src/components/providers/auth-provider.tsx",
        "Provider wrapping the application in root layout",
        "useSession hook available for components",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "auth-ui-login-page",
      "title": "Build login page with form",
      "description": "Create the sign in page with email and password form using react-hook-form.",
      "acceptance": [
        "Sign in page at /src/app/(auth)/login/page.tsx",
        "Form built with react-hook-form via `bun add react-hook-form @hookform/resolvers`",
        "Email and password input fields with validation",
        "Loading spinner on submit button during authentication",
        "Error messages displayed for invalid credentials",
        "Link to registration page",
        "Successful login redirects to appropriate dashboard based on role",
        "Page loads correctly at http://localhost:3000/login",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "auth-ui-register-page",
      "title": "Build registration page with role selection",
      "description": "Create the sign up page with registration form and role selection.",
      "acceptance": [
        "Sign up page at /src/app/(auth)/register/page.tsx",
        "Form with name, email, password, confirm password fields",
        "Role selection: coach or student radio buttons",
        "Password strength validation (minimum 8 characters)",
        "Loading spinner on submit button during registration",
        "Error handling for existing email",
        "Successful registration redirects to login with success message",
        "Link to login page",
        "Page loads correctly at http://localhost:3000/register",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "marketing-ui-landing-page",
      "title": "Build marketing landing page with hero section and features",
      "description": "Create the main marketing landing page with compelling hero section, feature highlights, testimonials section, and clear call-to-action buttons driving sign-ups.",
      "acceptance": [
        "Landing page at /src/app/(marketing)/page.tsx",
        "Hero section with headline, subheadline, and primary CTA button",
        "Features grid showcasing: 1:1 video, lesson planning, payments, analytics",
        "Each feature card has icon, title, and description",
        "Social proof section with placeholder testimonial cards",
        "Pricing preview section linking to full pricing page",
        "Responsive design: single column mobile, multi-column desktop",
        "Navigation header with logo, nav links, and Sign In / Get Started buttons",
        "Footer with links, copyright, and social media placeholders",
        "Page loads correctly at http://localhost:3000",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "marketing-ui-pricing-page",
      "title": "Create pricing page with plan comparison and sign-up flow",
      "description": "Build a pricing page displaying different subscription tiers for coaches. Include feature comparison table, FAQ section, and direct links to registration.",
      "acceptance": [
        "Pricing page at /src/app/(marketing)/pricing/page.tsx",
        "Three pricing tiers displayed: Starter (free), Professional, Enterprise",
        "Each tier shows price, billing period, included features list",
        "Feature comparison table highlighting differences between plans",
        "CTA buttons on each tier link to /register with plan parameter",
        "FAQ accordion section addressing common pricing questions",
        "Money-back guarantee badge for paid plans",
        "Annual vs monthly toggle showing discounted annual pricing",
        "Responsive card layout stacking on mobile",
        "Page loads correctly at http://localhost:3000/pricing",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "marketing-ui-about-page",
      "title": "Build about page with team and mission content",
      "description": "Create an about page explaining the platform's mission, team background, and value proposition for both coaches and students.",
      "acceptance": [
        "About page at /src/app/(marketing)/about/page.tsx",
        "Mission statement section with compelling copy",
        "Team section with placeholder profiles (image, name, role, bio)",
        "Platform story timeline or key milestones section",
        "Values section highlighting platform principles",
        "CTA section encouraging visitors to start coaching",
        "Consistent styling with other marketing pages",
        "Page loads correctly at http://localhost:3000/about",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "low",
      "passes": false
    },
    {
      "id": "dashboard-ui-shared-layout",
      "title": "Create shared dashboard layout with sidebar navigation",
      "description": "Build the shared dashboard layout component with sidebar navigation that adapts for coach and student roles.",
      "acceptance": [
        "Dashboard layout at /src/app/(dashboard)/layout.tsx",
        "Sidebar navigation component at /src/components/dashboard/sidebar.tsx",
        "Navigation items dynamically rendered based on user role",
        "Coach nav: Dashboard, Students, Lesson Plans, Schedule, Payments, Analytics, Settings",
        "Student nav: Dashboard, My Lessons, Payments, Settings",
        "User avatar and name in sidebar footer with sign out option",
        "Responsive: sidebar collapses to hamburger menu on mobile",
        "Active navigation item highlighted",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "dashboard-ui-coach-overview",
      "title": "Create coach dashboard with overview and quick actions",
      "description": "Build the main coach dashboard displaying key metrics, upcoming lessons, recent activity, and quick action buttons for common tasks.",
      "acceptance": [
        "Coach dashboard at /src/app/(dashboard)/dashboard/coach/page.tsx",
        "Protected route requiring authenticated coach role",
        "Overview cards showing: total students, lessons this week, revenue this month, average rating",
        "Upcoming lessons list showing next 5 scheduled sessions with student name, time, and join button",
        "Recent activity feed showing last 10 events (new students, completed lessons, payments)",
        "Quick action buttons: Schedule Lesson, Add Student, Create Lesson Plan",
        "Welcome message with coach's name and current date",
        "GET /api/coach/dashboard returns dashboard data",
        "Page loads correctly when authenticated as coach",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "dashboard-ui-student-overview",
      "title": "Create student dashboard with lessons and progress",
      "description": "Build the student-facing dashboard showing their upcoming lessons, lesson history, and progress with their coach.",
      "acceptance": [
        "Student dashboard at /src/app/(dashboard)/dashboard/student/page.tsx",
        "Protected route requiring authenticated student role",
        "Upcoming lessons card showing scheduled sessions with coach name and join button",
        "Past lessons list with dates, topics covered, and any recordings available",
        "Coach info card showing assigned coach's profile and contact option",
        "Progress section with completed lessons count and hours logged",
        "Quick action to request/schedule new lesson with coach",
        "Notification area for lesson reminders and messages",
        "GET /api/student/dashboard returns dashboard data",
        "Page loads correctly when authenticated as student",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "students-ui-list-page",
      "title": "Build student list page for coaches",
      "description": "Create the student listing page where coaches can view all their students with search and filtering.",
      "acceptance": [
        "Students list page at /src/app/(dashboard)/dashboard/coach/students/page.tsx",
        "Table/grid view of all students with avatar, name, email, status, lessons count",
        "Search functionality by name or email",
        "Filter by status (active, inactive, pending)",
        "Pagination for large student lists",
        "Link to student detail page for each row",
        "GET /api/students returns paginated list with filtering support",
        "Loading skeleton while data fetches",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "students-ui-add-dialog",
      "title": "Build add student dialog",
      "description": "Create the dialog for coaches to add new students to their roster.",
      "acceptance": [
        "Add student button on students list page opens dialog",
        "Dialog form with fields: name, email, initial notes",
        "Form validation with react-hook-form",
        "Loading spinner during submission",
        "POST /api/students creates new student record",
        "Success closes dialog and refreshes list",
        "Error handling for duplicate email",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "students-ui-detail-page",
      "title": "Build student detail page",
      "description": "Create the student detail page showing full profile, session history, notes, and management actions.",
      "acceptance": [
        "Student detail page at /src/app/(dashboard)/dashboard/coach/students/[id]/page.tsx",
        "Profile section with avatar, name, email, status",
        "Session history table with dates, topics, and status",
        "Editable notes field with auto-save functionality",
        "Status toggle to activate/deactivate student",
        "Delete student button with confirmation dialog",
        "GET /api/students/[id] returns full student details with relations",
        "PUT /api/students/[id] updates student record",
        "DELETE /api/students/[id] removes student with cascade handling",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "lesson-plans-ui-list-page",
      "title": "Build lesson plans list page",
      "description": "Create the lesson plans listing page showing all coach's lesson templates.",
      "acceptance": [
        "Lesson plans list at /src/app/(dashboard)/dashboard/coach/plans/page.tsx",
        "Card grid showing all lesson plans with title, description preview, and draft badge",
        "Search and filter by title or draft status",
        "Create new plan button linking to editor",
        "Duplicate plan action creating copy with '(Copy)' suffix",
        "GET /api/lesson-plans returns coach's lesson plans",
        "Loading skeleton while data fetches",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "lesson-plans-ui-editor-page",
      "title": "Build lesson plan editor page",
      "description": "Create the lesson plan editor for creating and editing lesson templates.",
      "acceptance": [
        "Plan editor at /src/app/(dashboard)/dashboard/coach/plans/new/page.tsx",
        "Edit page at /src/app/(dashboard)/dashboard/coach/plans/[id]/edit/page.tsx",
        "Editor form fields: title, description (textarea), objectives list, materials list",
        "Add/remove items in objectives and materials dynamically",
        "Save as draft or publish toggle",
        "Form validation with react-hook-form",
        "Loading spinner on save",
        "POST /api/lesson-plans creates new plan",
        "PUT /api/lesson-plans/[id] updates existing plan",
        "DELETE /api/lesson-plans/[id] removes plan with confirmation",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "lessons-ui-calendar-scheduler",
      "title": "Build lesson scheduling with calendar interface",
      "description": "Create the lesson scheduling system with a calendar view for coaches to manage their availability and schedule sessions with students.",
      "acceptance": [
        "Schedule page at /src/app/(dashboard)/dashboard/coach/schedule/page.tsx",
        "Weekly calendar view showing days and time slots",
        "Scheduled lessons displayed as blocks on calendar with student name and topic",
        "Click on empty slot opens schedule lesson dialog",
        "Schedule dialog: select student, set title, choose lesson plan (optional), set duration",
        "POST /api/lessons creates scheduled lesson",
        "Click on lesson block shows details with edit/cancel options",
        "PUT /api/lessons/[id] updates lesson details",
        "Cancel lesson sets status to cancelled with optional reason",
        "Calendar navigation: previous/next week, jump to date",
        "GET /api/lessons?week=YYYY-WW returns lessons for calendar display",
        "Color coding by lesson status: scheduled (blue), completed (green), cancelled (gray)",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-daily-api-integration",
      "title": "Integrate Daily.co SDK for video room creation",
      "description": "Set up Daily.co integration for creating and managing video rooms. Include API routes for room creation and configuration.",
      "acceptance": [
        "Daily.co SDK installed via `bun add @daily-co/daily-js`",
        "Environment variables: DAILY_API_KEY added to .env.example",
        "Daily API helper at /src/lib/daily.ts with room creation functions",
        "POST /api/rooms creates Daily.co room with unique name and returns roomUrl",
        "Room settings: enable_chat, enable_screenshare, max_participants: 2",
        "Room expiry set to lesson scheduledAt + duration + 30 minutes buffer",
        "Room URL stored in lessons.roomUrl when scheduling",
        "GET /api/rooms/[name] returns room details and status",
        "DELETE /api/rooms/[name] destroys room after lesson completion",
        "Error handling for Daily.co API failures with user-friendly messages",
        "Type definitions for Daily.co responses at /src/types/daily.ts",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-ui-room-layout",
      "title": "Build video room page layout and provider",
      "description": "Create the video room page structure with Daily.co provider setup and responsive layout.",
      "acceptance": [
        "Video room page at /src/app/(dashboard)/room/[id]/page.tsx",
        "DailyProvider wrapper component at /src/components/video/daily-provider.tsx initializing Daily.co call object",
        "Responsive layout: side-by-side on desktop, stacked on mobile",
        "Room loading state while Daily.co initializes",
        "Error state for invalid room or connection failures",
        "Leave call button ending session and redirecting to dashboard",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-ui-prejoin-screen",
      "title": "Build video room pre-join screen",
      "description": "Create the pre-join screen showing camera preview and device selection before joining the call.",
      "acceptance": [
        "Pre-join component at /src/components/video/pre-join.tsx",
        "Local camera preview showing user's video feed",
        "Camera selection dropdown",
        "Microphone selection dropdown",
        "Speaker selection dropdown",
        "Audio level meter showing microphone input",
        "Join call button to enter the room",
        "Name input field for display name",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-ui-participant-tiles",
      "title": "Build video participant tiles",
      "description": "Create the video tile components showing local and remote participant video streams.",
      "acceptance": [
        "Video tile component at /src/components/video/video-tile.tsx",
        "Local video preview showing user's camera feed",
        "Remote participant video displayed when they join",
        "Participant names displayed on video tiles",
        "Muted indicator icon on tiles when audio is off",
        "Camera off placeholder when video is disabled",
        "Connection status indicator (connecting, connected, reconnecting)",
        "Video works correctly - both participants can see and hear each other",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-ui-control-bar",
      "title": "Build video room control bar",
      "description": "Create the control bar with audio, video, and screen sharing controls.",
      "acceptance": [
        "Control bar component at /src/components/video/control-bar.tsx",
        "Audio mute/unmute toggle button with visual indicator",
        "Video on/off toggle button with visual indicator",
        "Screen share button starting/stopping screen share",
        "Leave call button with confirmation",
        "Settings gear opening device selection dialog mid-call",
        "Keyboard shortcuts: M for mute, V for video, S for screenshare",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "video-ui-advanced-features",
      "title": "Add advanced video call features",
      "description": "Enhance the video call experience with chat, picture-in-picture, fullscreen, and call timer.",
      "acceptance": [
        "In-call chat panel toggled by chat button, slides in from right",
        "Chat messages stored locally during call with timestamp and sender",
        "Picture-in-picture button using browser PiP API for local video",
        "Fullscreen toggle for entire call interface",
        "Network quality indicator showing connection strength",
        "Timer showing call duration since joining",
        "End call confirmation dialog preventing accidental exits",
        "Recording button (placeholder - triggers toast about premium feature)",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "payments-stripe-api-integration",
      "title": "Integrate Stripe for payment processing",
      "description": "Set up Stripe integration for processing one-time payments and subscriptions. Include checkout flow, webhook handling, and payment status tracking.",
      "acceptance": [
        "Stripe SDK installed via `bun add stripe @stripe/stripe-js`",
        "Environment variables added to .env.example: STRIPE_SECRET_KEY, STRIPE_PUBLISHABLE_KEY, STRIPE_WEBHOOK_SECRET",
        "Stripe client helpers at /src/lib/stripe.ts",
        "POST /api/checkout creates Stripe checkout session for lesson payment",
        "Checkout session includes lesson details, amount, and success/cancel URLs",
        "POST /api/webhooks/stripe handles Stripe webhook events",
        "Webhook verifies signature and processes: checkout.session.completed, payment_intent.succeeded",
        "Payment record created in database on successful webhook",
        "Checkout success page at /src/app/(dashboard)/checkout/success/page.tsx",
        "Checkout cancel page at /src/app/(dashboard)/checkout/cancel/page.tsx",
        "Payment status synced between Stripe and local database",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "payments-ui-coach-management",
      "title": "Build payment management interface for coaches",
      "description": "Create the payments section where coaches can view earnings, transaction history, and manage pricing for their lessons.",
      "acceptance": [
        "Payments page at /src/app/(dashboard)/dashboard/coach/payments/page.tsx",
        "Earnings overview cards: total earnings, this month, pending payouts",
        "Transaction history table with date, student, amount, status, actions",
        "Filter transactions by date range, student, or status",
        "Export transactions as CSV download",
        "Pricing settings section to set hourly rate",
        "GET /api/payments returns paginated payment history",
        "GET /api/payments/stats returns aggregated earnings data",
        "Refund button on completed payments (with confirmation)",
        "POST /api/payments/[id]/refund initiates Stripe refund",
        "Payment detail modal showing full transaction information",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "payments-ui-student-checkout",
      "title": "Create student payment flow and history",
      "description": "Build the student-facing payment experience including lesson booking with payment, payment history, and saved payment methods.",
      "acceptance": [
        "Book lesson flow includes payment step before confirmation",
        "Lesson price displayed based on coach's hourly rate and duration",
        "Stripe Elements embedded for card input on booking page",
        "Payment processing shows loading state during Stripe API call",
        "Success state confirms booking and payment together",
        "Student payment history at /src/app/(dashboard)/dashboard/student/payments/page.tsx",
        "History shows date, lesson, amount, receipt link",
        "Stripe receipts accessible via receipt URL from payment record",
        "Saved cards section showing previously used payment methods",
        "Add new card option using Stripe SetupIntent flow",
        "Default card selection for faster checkout",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "analytics-api-event-tracking",
      "title": "Implement analytics event tracking system",
      "description": "Build the analytics infrastructure to track key events like lesson completions, payments, and user engagement for coach insights.",
      "acceptance": [
        "Analytics service at /src/lib/analytics.ts with trackEvent function",
        "Events tracked: lesson_scheduled, lesson_completed, lesson_cancelled, payment_received, student_added",
        "Event data includes timestamp, coachId, and event-specific metadata",
        "POST /api/analytics/track records event to Analytics table",
        "Batch insert support for multiple events",
        "Client-side tracking for page views and UI interactions",
        "Server-side tracking for API-triggered events",
        "Event validation ensuring required fields present",
        "GET /api/analytics/events returns paginated event log",
        "Filter events by type and date range",
        "Analytics events fire correctly on lesson completion and payment",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "analytics-ui-dashboard-charts",
      "title": "Build analytics dashboard with charts and insights",
      "description": "Create a comprehensive analytics dashboard for coaches showing lesson trends, revenue graphs, student engagement, and key performance metrics.",
      "acceptance": [
        "Analytics page at /src/app/(dashboard)/dashboard/coach/analytics/page.tsx",
        "Date range selector: last 7 days, 30 days, 90 days, custom",
        "Lessons chart showing completed lessons over time (line/bar chart)",
        "Revenue chart showing earnings over time with trend line",
        "Student growth chart showing active students over time",
        "Key metrics cards: completion rate, average lesson duration, revenue per student",
        "Top students table by lessons completed or revenue",
        "Charts built using recharts via `bun add recharts`",
        "GET /api/analytics/metrics returns aggregated metrics for date range",
        "Loading skeletons while data fetches",
        "Empty state when no data available for selected period",
        "Export analytics data as CSV",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "notifications-api-and-ui",
      "title": "Implement in-app notification system",
      "description": "Build a notification system for lesson reminders, payment confirmations, and important updates. Include notification bell, dropdown, and preferences.",
      "acceptance": [
        "Notifications table added to schema: id, userId, type, title, message, read, createdAt",
        "Notification bell icon in dashboard header showing unread count badge",
        "Dropdown panel showing recent notifications with mark as read",
        "Notification types: lesson_reminder, payment_received, new_student, lesson_cancelled",
        "POST /api/notifications creates notification for user",
        "GET /api/notifications returns user's notifications sorted by date",
        "PUT /api/notifications/[id]/read marks notification as read",
        "PUT /api/notifications/read-all marks all as read",
        "Notification preferences page at /src/app/(dashboard)/dashboard/settings/notifications/page.tsx",
        "Toggle settings for each notification type (email, in-app)",
        "Automatic lesson reminder notifications 24h and 1h before scheduled time",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "settings-ui-profile-page",
      "title": "Create user profile and settings pages",
      "description": "Build profile management allowing users to update their personal information, avatar, timezone, and account settings.",
      "acceptance": [
        "Settings page at /src/app/(dashboard)/dashboard/settings/page.tsx",
        "Profile section: name, email (read-only), bio, timezone dropdown",
        "Avatar upload with image preview and crop functionality",
        "Avatar stored as base64 or uploaded to public folder",
        "PUT /api/users/me updates current user's profile",
        "Password change section with current password verification",
        "Timezone dropdown with common timezones, auto-detect option",
        "Coach-specific settings: hourly rate, availability description, specialties",
        "Account deletion with confirmation and data export option",
        "Success toast on save, error handling for failures",
        "Form validation with helpful error messages",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "ux-error-boundaries-handling",
      "title": "Implement comprehensive error handling and boundaries",
      "description": "Add robust error handling throughout the application including error boundaries, API error responses, and user-friendly error pages.",
      "acceptance": [
        "Global error boundary at /src/app/error.tsx with retry button",
        "Not found page at /src/app/not-found.tsx with navigation links",
        "API routes return consistent error format: { error: string, code: string }",
        "HTTP status codes used correctly: 400 bad request, 401 unauthorized, 403 forbidden, 404 not found, 500 server error",
        "Try-catch blocks in all API route handlers",
        "Database errors caught and logged without exposing internals",
        "Form submission errors displayed inline with fields",
        "Network error handling with retry suggestions",
        "Toast notifications for transient errors",
        "Loading states prevent interaction during async operations",
        "Console errors logged in development only",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "high",
      "passes": false
    },
    {
      "id": "ux-loading-states-skeletons",
      "title": "Add loading states and skeleton screens",
      "description": "Implement loading states throughout the application using skeleton screens and spinners for a polished user experience during data fetching.",
      "acceptance": [
        "Skeleton components created for: card, table row, avatar, text line",
        "Dashboard pages show skeletons while fetching initial data",
        "Loading.tsx files in each route group for Suspense boundaries",
        "Button loading states disable interaction and show spinner",
        "Form submission shows loading indicator on submit button",
        "Table pagination shows loading state during page changes",
        "Modal content shows skeleton until data loaded",
        "Image components show placeholder until loaded",
        "Skeleton animations use subtle pulse effect",
        "Loading states don't cause layout shift when content loads",
        "All pages load correctly without flash of unstyled content",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "ux-responsive-mobile-polish",
      "title": "Polish responsive design and mobile experience",
      "description": "Ensure all pages and components work flawlessly on mobile devices with proper touch targets, responsive layouts, and mobile-specific optimizations.",
      "acceptance": [
        "All pages tested at 320px, 768px, and 1024px breakpoints",
        "Touch targets minimum 44px for all interactive elements",
        "Dashboard sidebar collapses to hamburger menu on mobile",
        "Tables switch to card layout on small screens",
        "Modals become full-screen sheets on mobile",
        "Video call interface adapts to portrait and landscape",
        "Forms have appropriate input types (tel, email, date)",
        "Keyboard doesn't obscure focused inputs on mobile",
        "Pull-to-refresh disabled to prevent accidental navigation",
        "Safe area insets respected on notched devices",
        "Font sizes readable without zooming (minimum 16px inputs)",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "medium",
      "passes": false
    },
    {
      "id": "ux-accessibility-wcag-compliance",
      "title": "Ensure WCAG 2.1 accessibility compliance",
      "description": "Audit and fix accessibility issues to meet WCAG 2.1 AA standards. Include proper ARIA labels, keyboard navigation, and screen reader support.",
      "acceptance": [
        "All images have descriptive alt text",
        "Form inputs have associated labels",
        "ARIA labels on icon-only buttons",
        "Focus indicators visible on all interactive elements",
        "Keyboard navigation works for all features (Tab, Enter, Escape)",
        "Skip to main content link at top of page",
        "Color contrast meets AA standard (4.5:1 for text)",
        "Error messages announced to screen readers",
        "Modals trap focus and return focus on close",
        "Page titles unique and descriptive for each route",
        "Headings follow proper hierarchy (h1 > h2 > h3)",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "low",
      "passes": false
    },
    {
      "id": "seo-metadata-opengraph",
      "title": "Add SEO metadata and Open Graph tags",
      "description": "Implement SEO best practices for marketing pages including meta descriptions, Open Graph tags, and structured data for search engine visibility.",
      "acceptance": [
        "Root layout has default metadata with site title and description",
        "Each marketing page has unique title and description via generateMetadata",
        "Open Graph tags for title, description, image on marketing pages",
        "Twitter card tags for social sharing",
        "Canonical URLs set to prevent duplicate content",
        "Sitemap generated at /sitemap.xml listing public pages",
        "Robots.txt at /robots.txt allowing search engine crawling",
        "Structured data (JSON-LD) for Organization on home page",
        "Page titles follow format: Page Name | Coach",
        "Meta descriptions under 160 characters",
        "OG images sized at 1200x630 for optimal sharing",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "low",
      "passes": false
    },
    {
      "id": "testing-vitest-infrastructure",
      "title": "Configure testing infrastructure with Vitest",
      "description": "Set up testing infrastructure using Vitest for unit and integration tests. Include test utilities and example tests for critical paths.",
      "acceptance": [
        "Vitest installed via `bun add -d vitest @testing-library/react @testing-library/jest-dom jsdom`",
        "Vitest config at vitest.config.ts with jsdom environment",
        "Test setup file at /src/test/setup.ts with testing-library matchers",
        "Test script added to package.json: \"test\": \"vitest\"",
        "Example unit test for utility function",
        "Example component test using testing-library",
        "Example API route test using mock requests",
        "Test coverage script: \"test:coverage\": \"vitest --coverage\"",
        "Tests can be run with `bun run test`",
        "All example tests pass",
        "`bunx biome check .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully"
      ],
      "priority": "low",
      "passes": false
    },
    {
      "id": "qa-final-validation-build",
      "title": "Final validation, linting, type checking, and build",
      "description": "Perform final validation ensuring all pages load correctly, linting passes, TypeScript compiles without errors, and production build succeeds.",
      "acceptance": [
        "All marketing pages load without errors: /, /pricing, /about",
        "Auth pages load without errors: /login, /register",
        "Coach dashboard pages load when authenticated: /dashboard/coach, /dashboard/coach/students, /dashboard/coach/plans, /dashboard/coach/schedule, /dashboard/coach/payments, /dashboard/coach/analytics",
        "Student dashboard pages load when authenticated: /dashboard/student, /dashboard/student/payments",
        "Video room page loads and Daily.co initializes: /room/test",
        "Settings pages load: /dashboard/settings, /dashboard/settings/notifications",
        "`bunx biome check .` passes with no errors",
        "`bunx biome lint .` passes with no errors",
        "`bunx tsc --noEmit` passes with no type errors",
        "`bun run build` completes successfully",
        "No console errors in browser during page navigation",
        "Build output size is reasonable (< 500KB first load JS)"
      ],
      "priority": "high",
      "passes": false
    }
  ]
}
